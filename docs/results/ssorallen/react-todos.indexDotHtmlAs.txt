b'<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n <head>\n  <meta charset="utf-8"/>\n  <title>\n   React.js Todos\n  </title>\n  <meta content="Backbone\'s example TODO app with React JS\n      Components for views in place of Backbone.View" name="description"/>\n  <link href="favicon.ico" rel="icon" type="image/x-icon"/>\n  <link href="css/reacttodos.css" rel="stylesheet"/>\n  <script>\n   // Todo Model\n// ----------\n\n// Our basic **Todo** model has `title` and `done` attributes.\nvar Todo = Backbone.Model.extend({\n\n  // Default attributes for the Todo item.\n  defaults: function() {\n    return {\n      title: "",\n      done: false\n    };\n  }\n\n});\n\n// Todo Collection\n// ---------------\n\n// The collection of Todos is backed by *localStorage* instead of a remote\n// server.\nvar TodoList = Backbone.Collection.extend({\n\n  // Reference to this collection\'s model.\n  model: Todo,\n\n  // Save all of the todo items under the `"todos-react"` namespace.\n  localStorage: new Backbone.LocalStorage("todos-react"),\n\n  // Filter down the list of all todo items that are finished.\n  done: function() {\n    return this.where({done: true});\n  },\n\n  // Filter down the list to only todo items that are still not finished.\n  remaining: function() {\n    return this.where({done: false});\n  }\n\n});\n\n// Backbone/React Integration\n// --------------------------\n\n// Updates React components when their Backbone resources change. Expects the\n// component to implement a method called `getResource` that returns an object\n// that extends `Backbone.Events`.\nvar BackboneMixin = {\n\n  // Listen to all events on this component\'s collection or model and force an\n  // update when they fire. Let React decide whether the DOM should change.\n  componentDidMount: function() {\n    this._boundForceUpdate = this.forceUpdate.bind(this, null);\n    this.getResource().on("all", this._boundForceUpdate, this);\n  },\n\n  // Clean up the listener when the component will be removed.\n  componentWillUnmount: function() {\n    this.getResource().off("all", this._boundForceUpdate);\n  }\n\n};\n\n// Todo List Item Component\n// ------------------------\n\n// The DOM for a todo item...\nvar TodoListItemComponent = React.createClass({displayName: \'TodoListItemComponent\',\n\n  // If the component updates and is in edit mode, send focus to the `&lt;input&gt;`.\n  componentDidUpdate: function(prevProps) {\n    if (this.props.editing &amp;&amp; !prevProps.editing) {\n      this.refs.editInput.getDOMNode().focus();\n    }\n  },\n\n  // Destroying the model fires a `remove` event on the model\'s collection,\n  // which forces an update and removes this **TodoListItemComponent** from the\n  // DOM. We don\'t have to do any other cleanup!\n  destroy: function() {\n    this.props.model.destroy();\n  },\n\n  // Stop editing if the input gets an "Enter" keypress.\n  handleEditKeyPress: function(event) {\n    if (13 === event.keyCode) {\n      this.stopEditing();\n    }\n  },\n\n  render: function() {\n    var inputStyles = {};\n    var viewStyles = {};\n\n    // Hide the `.view` when editing\n    if (this.props.editing) {\n      viewStyles.display = "none";\n\n    // ... and hide the `&lt;input&gt;` when not editing\n    } else {\n      inputStyles.display = "none";\n    }\n\n    return (\n      React.createElement("li", {className: this.props.model.get("done") ? "done" : ""}, \n        React.createElement("div", {className: "view", onDoubleClick: this.startEditing, style: viewStyles}, \n          React.createElement("input", {className: "toggle", type: "checkbox", \n            checked: this.props.model.get("done"), \n            onChange: this.toggleDone}), \n          React.createElement("label", null, this.props.model.get("title")), \n          React.createElement("a", {className: "destroy", onClick: this.destroy})\n        ), \n        React.createElement("input", {className: "edit", ref: "editInput", type: "text", \n          onBlur: this.stopEditing, \n          onChange: this.setTitle, \n          onKeyPress: this.handleEditKeyPress, \n          style: inputStyles, \n          value: this.props.model.get("title")})\n      )\n    );\n  },\n\n  // Set the title of this item\'s model when the value of the `&lt;input&gt;` changes.\n  setTitle: function(event) {\n    this.props.model.set("title", event.target.value);\n  },\n\n  // Tell the parent component this list item is entering edit mode.\n  startEditing: function() {\n    this.props.onStartEditing(this.props.model.id);\n  },\n\n  // Exit edit mode.\n  stopEditing: function() {\n    this.props.onStopEditing(this.props.model.id);\n  },\n\n  toggleDone: function(event) {\n    this.props.model.set("done", event.target.checked);\n  }\n\n});\n\n// Todo List Component\n// -------------------\n\n// Renders a list of todos.\nvar TodoListComponent = React.createClass({displayName: \'TodoListComponent\',\n\n  // Start with no list item in edit mode.\n  getInitialState: function() {\n    return {\n      editingModelId: null\n    };\n  },\n\n  // When a `TodoListItemComponent` starts editing, it passes its model\'s ID to\n  // this callback. Setting the state triggers this component to re-render and\n  // render that `TodoListItemComponent` in edit mode.\n  setEditingModelId: function(modelId) {\n    this.setState({editingModelId: modelId});\n  },\n\n  unsetEditingModelId: function(modelId) {\n    if (modelId === this.state.editingModelId) {\n      this.setState({editingModelId: null});\n    }\n  },\n\n  render: function() {\n    return (\n      React.createElement("ul", {id: "todo-list"}, \n        this.props.collection.map(function(model) {\n          // Pass the `key` attribute[1] a unique ID so React can track the\n          // elements properly.\n          //\n          // [1] http://facebook.github.io/react/docs/multiple-components.html#dynamic-children\n          return (\n            React.createElement(TodoListItemComponent, {\n              editing: this.state.editingModelId === model.id, \n              key: model.id, \n              model: model, \n              onStartEditing: this.setEditingModelId, \n              onStopEditing: this.unsetEditingModelId})\n          );\n        }, this)\n      )\n    );\n  }\n\n});\n\n// Footer Component\n// ----------------\n\n// The footer shows the total number of todos and how many are completed.\nvar FooterComponent = React.createClass({displayName: \'FooterComponent\',\n\n  render: function() {\n    var clearCompletedStyles = {};\n\n    // Hide the "Clear X completed items" button if there are no completed\n    // items.\n    if (0 === this.props.itemsDoneCount) {\n      clearCompletedStyles.display = "none";\n    }\n\n    // Clicking the "Clear X completed items" button calls the\n    // "clearCompletedItems" function passed in on `props`.\n    return (\n      React.createElement("footer", null, \n        React.createElement("a", {id: "clear-completed", style: clearCompletedStyles, \n            onClick: this.props.clearCompletedItems}, \n          "Clear ", this.props.itemsDoneCount, " completed", \n          1 === this.props.itemsDoneCount ? " item" : " items"\n        ), \n        React.createElement("div", {className: "todo-count"}, \n          React.createElement("b", null, this.props.itemsRemainingCount), \n          1 === this.props.itemsRemainingCount ? " item" : " items", " left"\n        )\n      )\n    );\n  }\n\n});\n\n// Main Component\n// --------------\n\n// The main component contains the list of todos and the footer.\nvar MainComponent = React.createClass({displayName: \'MainComponent\',\n\n  // Tell the **App** to toggle the *done* state of all **Todo** items.\n  toggleAllItemsCompleted: function(event) {\n    this.props.toggleAllItemsCompleted(event.target.checked);\n  },\n\n  render: function() {\n    var style = {};\n\n    // Hide the "Mark all as complete" button and the footer if there are no\n    // **Todo** items.\n    if (0 === this.props.collection.length) {\n      style.display = "none";\n    }\n\n    return (\n      React.createElement("section", {id: "main", style: style}, \n        React.createElement("input", {id: "toggle-all", type: "checkbox", \n          checked: 0 === this.props.collection.remaining().length, \n          onChange: this.toggleAllItemsCompleted}), \n        React.createElement("label", {htmlFor: "toggle-all"}, \n          "Mark all as complete"\n        ), \n        React.createElement(TodoListComponent, {collection: this.props.collection}), \n        React.createElement(FooterComponent, {\n          clearCompletedItems: this.props.clearCompletedItems, \n          itemsRemainingCount: this.props.collection.remaining().length, \n          itemsDoneCount: this.props.collection.done().length})\n      )\n    );\n  }\n\n});\n\nvar AppComponent = React.createClass({displayName: \'AppComponent\',\n\n  // Clear all done todo items, destroying their models.\n  clearCompletedItems: function() {\n    _.invoke(this.props.collection.done(), "destroy");\n  },\n\n  // Fetch Todos before the App is rendered to the DOM.\n  componentWillMount: function() {\n    this.props.collection.fetch();\n  },\n\n  // Start the app with a blank `&lt;input&gt;`.\n  getInitialState: function() {\n    return {\n      title: ""\n    };\n  },\n\n  // Used by the **BackboneMixin** to watch for changes on this component\'s\n  // resource.\n  getResource: function() {\n    return this.props.collection;\n  },\n\n  // Set the state of the title when the `&lt;input&gt;` is changed.\n  handleTitleChange: function(event) {\n    this.setState({title: event.target.value});\n  },\n\n  // If "Enter" is pressed in the main input field, it will submit the form.\n  // Create a new **Todo** in *localStorage* and reset the title.\n  handleTitleFormSubmit: function(event) {\n    event.preventDefault();\n\n    if ("" === this.state.title) return;\n\n    this.props.collection.create({title: this.state.title});\n    this.setState({title: ""});\n  },\n\n  toggleAllItemsCompleted: function(completed) {\n    this.props.collection.each(function(todo) {\n      todo.save({"done": completed});\n    });\n  },\n\n  // Force updates whenever this **App**\'s collection receives events.\n  mixins: [BackboneMixin],\n\n  render: function() {\n    return (\n      React.createElement("div", null, \n        React.createElement("header", null, \n          React.createElement("h1", null, "Todos"), \n          React.createElement("form", {onSubmit: this.handleTitleFormSubmit}, \n            React.createElement("input", {placeholder: "What needs to be done?", type: "text", name: "title", \n              onChange: this.handleTitleChange, \n              value: this.state.title})\n          )\n        ), \n        React.createElement(MainComponent, {\n          clearCompletedItems: this.clearCompletedItems, \n          collection: this.props.collection, \n          toggleAllItemsCompleted: this.toggleAllItemsCompleted})\n      )\n    );\n  }\n})\n\n// Create a new Todo collection and render the **App** into `#todoapp`.\nReact.render(\n  React.createElement(AppComponent, {collection: new TodoList()}),\n  document.getElementById("todoapp")\n);\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtZWQuanMiLCJzb3VyY2VzIjpbInJlYWN0LXRvZG9zL3RvZG9zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGFBQWE7QUFDYixhQUFhOztBQUViLDhEQUE4RDtBQUM5RCxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNqQzs7RUFFRSxRQUFRLEVBQUUsV0FBVztJQUNuQixPQUFPO01BQ0wsS0FBSyxFQUFFLEVBQUU7TUFDVCxJQUFJLEVBQUUsS0FBSztLQUNaLENBQUM7QUFDTixHQUFHOztBQUVILENBQUMsQ0FBQyxDQUFDOztBQUVILGtCQUFrQjtBQUNsQixrQkFBa0I7O0FBRWxCLDBFQUEwRTtBQUMxRSxVQUFVO0FBQ1YsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDMUM7O0FBRUEsRUFBRSxLQUFLLEVBQUUsSUFBSTtBQUNiOztBQUVBLEVBQUUsWUFBWSxFQUFFLElBQUksUUFBUSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUM7QUFDeEQ7O0VBRUUsSUFBSSxFQUFFLFdBQVc7SUFDZixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNwQyxHQUFHO0FBQ0g7O0VBRUUsU0FBUyxFQUFFLFdBQVc7SUFDcEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckMsR0FBRzs7QUFFSCxDQUFDLENBQUMsQ0FBQzs7QUFFSCw2QkFBNkI7QUFDN0IsNkJBQTZCOztBQUU3Qiw2RUFBNkU7QUFDN0UsOEVBQThFO0FBQzlFLGtDQUFrQztBQUNsQyxJQUFJLGFBQWEsR0FBRztBQUNwQjtBQUNBOztFQUVFLGlCQUFpQixFQUFFLFdBQVc7SUFDNUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElB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QUMsdUJBQXdCLENBQUEsQ0FBRyxDQUFBO01BQ3ZELENBQUE7TUFDTjtHQUNIO0FBQ0gsQ0FBQyxDQUFDOztBQUVGLHVFQUF1RTtBQUN2RSxLQUFLLENBQUMsTUFBTTtFQUNWLG9CQUFDLFlBQVksRUFBQSxDQUFBLENBQUMsVUFBQSxFQUFVLENBQUUsSUFBSSxRQUFRLEVBQUcsQ0FBQSxDQUFHLENBQUE7RUFDNUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7Q0FDbkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRvZG8gTW9kZWxcbi8vIC0tLS0tLS0tLS1cblxuLy8gT3VyIGJhc2ljICoqVG9kbyoqIG1vZGVsIGhhcyBgdGl0bGVgIGFuZCBgZG9uZWAgYXR0cmlidXRlcy5cbnZhciBUb2RvID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAvLyBEZWZhdWx0IGF0dHJpYnV0ZXMgZm9yIHRoZSBUb2RvIGl0ZW0uXG4gIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IFwiXCIsXG4gICAgICBkb25lOiBmYWxzZVxuICAgIH07XG4gIH1cblxufSk7XG5cbi8vIFRvZG8gQ29sbGVjdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tXG5cbi8vIFRoZSBjb2xsZWN0aW9uIG9mIFRvZG9zIGlzIGJhY2tlZCBieSAqbG9jYWxTdG9yYWdlKiBpbnN0ZWFkIG9mIGEgcmVtb3RlXG4vLyBzZXJ2ZXIuXG52YXIgVG9kb0xpc3QgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgLy8gUmVmZXJlbmNlIHRvIHRoaXMgY29sbGVjdGlvbidzIG1vZGVsLlxuICBtb2RlbDogVG9kbyxcblxuICAvLyBTYXZlIGFsbCBvZiB0aGUgdG9kbyBpdGVtcyB1bmRlciB0aGUgYFwidG9kb3MtcmVhY3RcImAgbmFtZXNwYWNlLlxuICBsb2NhbFN0b3JhZ2U6IG5ldyBCYWNrYm9uZS5Mb2NhbFN0b3JhZ2UoXCJ0b2Rvcy1yZWFjdFwiKSxcblxuICAvLyBGaWx0ZXIgZG93biB0aGUgbGlzdCBvZiBhbGwgdG9kbyBpdGVtcyB0aGF0IGFyZSBmaW5pc2hlZC5cbiAgZG9uZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMud2hlcmUoe2RvbmU6IHRydWV9KTtcbiAgfSxcblxuICAvLyBGaWx0ZXIgZG93biB0aGUgbGlzdCB0byBvbmx5IHRvZG8gaXRlbXMgdGhhdCBhcmUgc3RpbGwgbm90IGZpbmlzaGVkLlxuICByZW1haW5pbmc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLndoZXJlKHtkb25lOiBmYWxzZX0pO1xuICB9XG5cbn0pO1xuXG4vLyBCYWNrYm9uZS9SZWFjdCBJbnRlZ3JhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVXBkYXRlcyBSZWFjdCBjb21wb25lbnRzIHdoZW4gdGhlaXIgQmFja2JvbmUgcmVzb3VyY2VzIGNoYW5nZS4gRXhwZWN0cyB0aGVcbi8vIGNvbXBvbmVudCB0byBpbXBsZW1lbnQgYSBtZXRob2QgY2FsbGVkIGBnZXRSZXNvdXJjZWAgdGhhdCByZXR1cm5zIGFuIG9iamVjdFxuLy8gdGhhdCBleHRlbmRzIGBCYWNrYm9uZS5FdmVudHNgLlxudmFyIEJhY2tib25lTWl4aW4gPSB7XG5cbiAgLy8gTGlzdGVuIHRvIGFsbCBldmVudHMgb24gdGhpcyBjb21wb25lbnQncyBjb2xsZWN0aW9uIG9yIG1vZGVsIGFuZCBmb3JjZSBhblxuICAvLyB1cGRhdGUgd2hlbiB0aGV5IGZpcmUuIExldCBSZWFjdCBkZWNpZGUgd2hldGhlciB0aGUgRE9NIHNob3VsZCBjaGFuZ2UuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9ib3VuZEZvcmNlVXBkYXRlID0gdGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMsIG51bGwpO1xuICAgIHRoaXMuZ2V0UmVzb3VyY2UoKS5vbihcImFsbFwiLCB0aGlzLl9ib3VuZEZvcmNlVXBkYXRlLCB0aGlzKTtcbiAgfSxcblxuICAvLyBDbGVhbiB1cCB0aGUgbGlzdGVuZXIgd2hlbiB0aGUgY29tcG9uZW50IHdpbGwgYmUgcmVtb3ZlZC5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZ2V0UmVzb3VyY2UoKS5vZmYoXCJhbGxcIiwgdGhpcy5fYm91bmRGb3JjZVVwZGF0ZSk7XG4gIH1cblxufTtcblxuLy8gVG9kbyBMaXN0IEl0ZW0gQ29tcG9uZW50XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVGhlIERPTSBmb3IgYSB0b2RvIGl0ZW0uLi5cbnZhciBUb2RvTGlzdEl0ZW1Db21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgLy8gSWYgdGhlIGNvbXBvbmVudCB1cGRhdGVzIGFuZCBpcyBpbiBlZGl0IG1vZGUsIHNlbmQgZm9jdXMgdG8gdGhlIGA8aW5wdXQ+YC5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbihwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5lZGl0aW5nICYmICFwcmV2UHJvcHMuZWRpdGluZykge1xuICAgICAgdGhpcy5yZWZzLmVkaXRJbnB1dC5nZXRET01Ob2RlKCkuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGVzdHJveWluZyB0aGUgbW9kZWwgZmlyZXMgYSBgcmVtb3ZlYCBldmVudCBvbiB0aGUgbW9kZWwncyBjb2xsZWN0aW9uLFxuICAvLyB3aGljaCBmb3JjZXMgYW4gdXBkYXRlIGFuZCByZW1vdmVzIHRoaXMgKipUb2RvTGlzdEl0ZW1Db21wb25lbnQqKiBmcm9tIHRoZVxuICAvLyBET00uIFdlIGRvbid0IGhhdmUgdG8gZG8gYW55IG90aGVyIGNsZWFudXAhXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMubW9kZWwuZGVzdHJveSgpO1xuICB9LFxuXG4gIC8vIFN0b3AgZWRpdGluZyBpZiB0aGUgaW5wdXQgZ2V0cyBhbiBcIkVudGVyXCIga2V5cHJlc3MuXG4gIGhhbmRsZUVkaXRLZXlQcmVzczogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoMTMgPT09IGV2ZW50LmtleUNvZGUpIHtcbiAgICAgIHRoaXMuc3RvcEVkaXRpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRTdHlsZXMgPSB7fTtcbiAgICB2YXIgdmlld1N0eWxlcyA9IHt9O1xuXG4gICAgLy8gSGlkZSB0aGUgYC52aWV3YCB3aGVuIGVkaXRpbmdcbiAgICBpZiAodGhpcy5wcm9wcy5lZGl0aW5nKSB7XG4gICAgICB2aWV3U3R5bGVzLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIC8vIC4uLiBhbmQgaGlkZSB0aGUgYDxpbnB1dD5gIHdoZW4gbm90IGVkaXRpbmdcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXRTdHlsZXMuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8bGkgY2xhc3NOYW1lPXt0aGlzLnByb3BzLm1vZGVsLmdldChcImRvbmVcIikgPyBcImRvbmVcIiA6IFwiXCJ9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZXdcIiBvbkRvdWJsZUNsaWNrPXt0aGlzLnN0YXJ0RWRpdGluZ30gc3R5bGU9e3ZpZXdTdHlsZXN9PlxuICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJ0b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5tb2RlbC5nZXQoXCJkb25lXCIpfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudG9nZ2xlRG9uZX0gLz5cbiAgICAgICAgICA8bGFiZWw+e3RoaXMucHJvcHMubW9kZWwuZ2V0KFwidGl0bGVcIil9PC9sYWJlbD5cbiAgICAgICAgICA8YSBjbGFzc05hbWU9XCJkZXN0cm95XCIgb25DbGljaz17dGhpcy5kZXN0cm95fT48L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiZWRpdFwiIHJlZj1cImVkaXRJbnB1dFwiIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBvbkJsdXI9e3RoaXMuc3RvcEVkaXRpbmd9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0VGl0bGV9XG4gICAgICAgICAgb25LZXlQcmVzcz17dGhpcy5oYW5kbGVFZGl0S2V5UHJlc3N9XG4gICAgICAgICAgc3R5bGU9e2lucHV0U3R5bGVzfVxuICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLm1vZGVsLmdldChcInRpdGxlXCIpfSAvPlxuICAgICAgPC9saT5cbiAgICApO1xuICB9LFxuXG4gIC8vIFNldCB0aGUgdGl0bGUgb2YgdGhpcyBpdGVtJ3MgbW9kZWwgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGA8aW5wdXQ+YCBjaGFuZ2VzLlxuICBzZXRUaXRsZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm1vZGVsLnNldChcInRpdGxlXCIsIGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIH0sXG5cbiAgLy8gVGVsbCB0aGUgcGFyZW50IGNvbXBvbmVudCB0aGlzIGxpc3QgaXRlbSBpcyBlbnRlcmluZyBlZGl0IG1vZGUuXG4gIHN0YXJ0RWRpdGluZzogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5vblN0YXJ0RWRpdGluZyh0aGlzLnByb3BzLm1vZGVsLmlkKTtcbiAgfSxcblxuICAvLyBFeGl0IGVkaXQgbW9kZS5cbiAgc3RvcEVkaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMub25TdG9wRWRpdGluZyh0aGlzLnByb3BzLm1vZGVsLmlkKTtcbiAgfSxcblxuICB0b2dnbGVEb25lOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMucHJvcHMubW9kZWwuc2V0KFwiZG9uZVwiLCBldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gIH1cblxufSk7XG5cbi8vIFRvZG8gTGlzdCBDb21wb25lbnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gUmVuZGVycyBhIGxpc3Qgb2YgdG9kb3MuXG52YXIgVG9kb0xpc3RDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgLy8gU3RhcnQgd2l0aCBubyBsaXN0IGl0ZW0gaW4gZWRpdCBtb2RlLlxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0aW5nTW9kZWxJZDogbnVsbFxuICAgIH07XG4gIH0sXG5cbiAgLy8gV2hlbiBhIGBUb2RvTGlzdEl0ZW1Db21wb25lbnRgIHN0YXJ0cyBlZGl0aW5nLCBpdCBwYXNzZXMgaXRzIG1vZGVsJ3MgSUQgdG9cbiAgLy8gdGhpcyBjYWxsYmFjay4gU2V0dGluZyB0aGUgc3RhdGUgdHJpZ2dlcnMgdGhpcyBjb21wb25lbnQgdG8gcmUtcmVuZGVyIGFuZFxuICAvLyByZW5kZXIgdGhhdCBgVG9kb0xpc3RJdGVtQ29tcG9uZW50YCBpbiBlZGl0IG1vZGUuXG4gIHNldEVkaXRpbmdNb2RlbElkOiBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ01vZGVsSWQ6IG1vZGVsSWR9KTtcbiAgfSxcblxuICB1bnNldEVkaXRpbmdNb2RlbElkOiBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgaWYgKG1vZGVsSWQgPT09IHRoaXMuc3RhdGUuZWRpdGluZ01vZGVsSWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdNb2RlbElkOiBudWxsfSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDx1bCBpZD1cInRvZG8tbGlzdFwiPlxuICAgICAgICB7dGhpcy5wcm9wcy5jb2xsZWN0aW9uLm1hcChmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICAgIC8vIFBhc3MgdGhlIGBrZXlgIGF0dHJpYnV0ZVsxXSBhIHVuaXF1ZSBJRCBzbyBSZWFjdCBjYW4gdHJhY2sgdGhlXG4gICAgICAgICAgLy8gZWxlbWVudHMgcHJvcGVybHkuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBbMV0gaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL211bHRpcGxlLWNvbXBvbmVudHMuaHRtbCNkeW5hbWljLWNoaWxkcmVuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUb2RvTGlzdEl0ZW1Db21wb25lbnRcbiAgICAgICAgICAgICAgZWRpdGluZz17dGhpcy5zdGF0ZS5lZGl0aW5nTW9kZWxJZCA9PT0gbW9kZWwuaWR9XG4gICAgICAgICAgICAgIGtleT17bW9kZWwuaWR9XG4gICAgICAgICAgICAgIG1vZGVsPXttb2RlbH1cbiAgICAgICAgICAgICAgb25TdGFydEVkaXRpbmc9e3RoaXMuc2V0RWRpdGluZ01vZGVsSWR9XG4gICAgICAgICAgICAgIG9uU3RvcEVkaXRpbmc9e3RoaXMudW5zZXRFZGl0aW5nTW9kZWxJZH0gLz5cbiAgICAgICAgICApO1xuICAgICAgICB9LCB0aGlzKX1cbiAgICAgIDwvdWw+XG4gICAgKTtcbiAgfVxuXG59KTtcblxuLy8gRm9vdGVyIENvbXBvbmVudFxuLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBUaGUgZm9vdGVyIHNob3dzIHRoZSB0b3RhbCBudW1iZXIgb2YgdG9kb3MgYW5kIGhvdyBtYW55IGFyZSBjb21wbGV0ZWQuXG52YXIgRm9vdGVyQ29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNsZWFyQ29tcGxldGVkU3R5bGVzID0ge307XG5cbiAgICAvLyBIaWRlIHRoZSBcIkNsZWFyIFggY29tcGxldGVkIGl0ZW1zXCIgYnV0dG9uIGlmIHRoZXJlIGFyZSBubyBjb21wbGV0ZWRcbiAgICAvLyBpdGVtcy5cbiAgICBpZiAoMCA9PT0gdGhpcy5wcm9wcy5pdGVtc0RvbmVDb3VudCkge1xuICAgICAgY2xlYXJDb21wbGV0ZWRTdHlsZXMuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8vIENsaWNraW5nIHRoZSBcIkNsZWFyIFggY29tcGxldGVkIGl0ZW1zXCIgYnV0dG9uIGNhbGxzIHRoZVxuICAgIC8vIFwiY2xlYXJDb21wbGV0ZWRJdGVtc1wiIGZ1bmN0aW9uIHBhc3NlZCBpbiBvbiBgcHJvcHNgLlxuICAgIHJldHVybiAoXG4gICAgICA8Zm9vdGVyPlxuICAgICAgICA8YSBpZD1cImNsZWFyLWNvbXBsZXRlZFwiIHN0eWxlPXtjbGVhckNvbXBsZXRlZFN0eWxlc31cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY2xlYXJDb21wbGV0ZWRJdGVtc30+XG4gICAgICAgICAgQ2xlYXIge3RoaXMucHJvcHMuaXRlbXNEb25lQ291bnR9IGNvbXBsZXRlZFxuICAgICAgICAgIHsxID09PSB0aGlzLnByb3BzLml0ZW1zRG9uZUNvdW50ID8gXCIgaXRlbVwiIDogXCIgaXRlbXNcIn1cbiAgICAgICAgPC9hPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvZG8tY291bnRcIj5cbiAgICAgICAgICA8Yj57dGhpcy5wcm9wcy5pdGVtc1JlbWFpbmluZ0NvdW50fTwvYj5cbiAgICAgICAgICB7MSA9PT0gdGhpcy5wcm9wcy5pdGVtc1JlbWFpbmluZ0NvdW50ID8gXCIgaXRlbVwiIDogXCIgaXRlbXNcIn0gbGVmdFxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZm9vdGVyPlxuICAgICk7XG4gIH1cblxufSk7XG5cbi8vIE1haW4gQ29tcG9uZW50XG4vLyAtLS0tLS0tLS0tLS0tLVxuXG4vLyBUaGUgbWFpbiBjb21wb25lbnQgY29udGFpbnMgdGhlIGxpc3Qgb2YgdG9kb3MgYW5kIHRoZSBmb290ZXIuXG52YXIgTWFpbkNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAvLyBUZWxsIHRoZSAqKkFwcCoqIHRvIHRvZ2dsZSB0aGUgKmRvbmUqIHN0YXRlIG9mIGFsbCAqKlRvZG8qKiBpdGVtcy5cbiAgdG9nZ2xlQWxsSXRlbXNDb21wbGV0ZWQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVBbGxJdGVtc0NvbXBsZXRlZChldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3R5bGUgPSB7fTtcblxuICAgIC8vIEhpZGUgdGhlIFwiTWFyayBhbGwgYXMgY29tcGxldGVcIiBidXR0b24gYW5kIHRoZSBmb290ZXIgaWYgdGhlcmUgYXJlIG5vXG4gICAgLy8gKipUb2RvKiogaXRlbXMuXG4gICAgaWYgKDAgPT09IHRoaXMucHJvcHMuY29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPHNlY3Rpb24gaWQ9XCJtYWluXCIgc3R5bGU9e3N0eWxlfT5cbiAgICAgICAgPGlucHV0IGlkPVwidG9nZ2xlLWFsbFwiIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgY2hlY2tlZD17MCA9PT0gdGhpcy5wcm9wcy5jb2xsZWN0aW9uLnJlbWFpbmluZygpLmxlbmd0aH1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy50b2dnbGVBbGxJdGVtc0NvbXBsZXRlZH0gLz5cbiAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJ0b2dnbGUtYWxsXCI+XG4gICAgICAgICAgTWFyayBhbGwgYXMgY29tcGxldGVcbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPFRvZG9MaXN0Q29tcG9uZW50IGNvbGxlY3Rpb249e3RoaXMucHJvcHMuY29sbGVjdGlvbn0gLz5cbiAgICAgICAgPEZvb3RlckNvbXBvbmVudFxuICAgICAgICAgIGNsZWFyQ29tcGxldGVkSXRlbXM9e3RoaXMucHJvcHMuY2xlYXJDb21wbGV0ZWRJdGVtc31cbiAgICAgICAgICBpdGVtc1JlbWFpbmluZ0NvdW50PXt0aGlzLnByb3BzLmNvbGxlY3Rpb24ucmVtYWluaW5nKCkubGVuZ3RofVxuICAgICAgICAgIGl0ZW1zRG9uZUNvdW50PXt0aGlzLnByb3BzLmNvbGxlY3Rpb24uZG9uZSgpLmxlbmd0aH0gLz5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICB9XG5cbn0pO1xuXG52YXIgQXBwQ29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIC8vIENsZWFyIGFsbCBkb25lIHRvZG8gaXRlbXMsIGRlc3Ryb3lpbmcgdGhlaXIgbW9kZWxzLlxuICBjbGVhckNvbXBsZXRlZEl0ZW1zOiBmdW5jdGlvbigpIHtcbiAgICBfLmludm9rZSh0aGlzLnByb3BzLmNvbGxlY3Rpb24uZG9uZSgpLCBcImRlc3Ryb3lcIik7XG4gIH0sXG5cbiAgLy8gRmV0Y2ggVG9kb3MgYmVmb3JlIHRoZSBBcHAgaXMgcmVuZGVyZWQgdG8gdGhlIERPTS5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmNvbGxlY3Rpb24uZmV0Y2goKTtcbiAgfSxcblxuICAvLyBTdGFydCB0aGUgYXBwIHdpdGggYSBibGFuayBgPGlucHV0PmAuXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBcIlwiXG4gICAgfTtcbiAgfSxcblxuICAvLyBVc2VkIGJ5IHRoZSAqKkJhY2tib25lTWl4aW4qKiB0byB3YXRjaCBmb3IgY2hhbmdlcyBvbiB0aGlzIGNvbXBvbmVudCdzXG4gIC8vIHJlc291cmNlLlxuICBnZXRSZXNvdXJjZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY29sbGVjdGlvbjtcbiAgfSxcblxuICAvLyBTZXQgdGhlIHN0YXRlIG9mIHRoZSB0aXRsZSB3aGVuIHRoZSBgPGlucHV0PmAgaXMgY2hhbmdlZC5cbiAgaGFuZGxlVGl0bGVDaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7dGl0bGU6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xuICB9LFxuXG4gIC8vIElmIFwiRW50ZXJcIiBpcyBwcmVzc2VkIGluIHRoZSBtYWluIGlucHV0IGZpZWxkLCBpdCB3aWxsIHN1Ym1pdCB0aGUgZm9ybS5cbiAgLy8gQ3JlYXRlIGEgbmV3ICoqVG9kbyoqIGluICpsb2NhbFN0b3JhZ2UqIGFuZCByZXNldCB0aGUgdGl0bGUuXG4gIGhhbmRsZVRpdGxlRm9ybVN1Ym1pdDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKFwiXCIgPT09IHRoaXMuc3RhdGUudGl0bGUpIHJldHVybjtcblxuICAgIHRoaXMucHJvcHMuY29sbGVjdGlvbi5jcmVhdGUoe3RpdGxlOiB0aGlzLnN0YXRlLnRpdGxlfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7dGl0bGU6IFwiXCJ9KTtcbiAgfSxcblxuICB0b2dnbGVBbGxJdGVtc0NvbXBsZXRlZDogZnVuY3Rpb24oY29tcGxldGVkKSB7XG4gICAgdGhpcy5wcm9wcy5jb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24odG9kbykge1xuICAgICAgdG9kby5zYXZlKHtcImRvbmVcIjogY29tcGxldGVkfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gRm9yY2UgdXBkYXRlcyB3aGVuZXZlciB0aGlzICoqQXBwKioncyBjb2xsZWN0aW9uIHJlY2VpdmVzIGV2ZW50cy5cbiAgbWl4aW5zOiBbQmFja2JvbmVNaXhpbl0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGhlYWRlcj5cbiAgICAgICAgICA8aDE+VG9kb3M8L2gxPlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVRpdGxlRm9ybVN1Ym1pdH0+XG4gICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJXaGF0IG5lZWRzIHRvIGJlIGRvbmU/XCIgdHlwZT1cInRleHRcIiBuYW1lPVwidGl0bGVcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUaXRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGl0bGV9IC8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgPE1haW5Db21wb25lbnRcbiAgICAgICAgICBjbGVhckNvbXBsZXRlZEl0ZW1zPXt0aGlzLmNsZWFyQ29tcGxldGVkSXRlbXN9XG4gICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5wcm9wcy5jb2xsZWN0aW9ufVxuICAgICAgICAgIHRvZ2dsZUFsbEl0ZW1zQ29tcGxldGVkPXt0aGlzLnRvZ2dsZUFsbEl0ZW1zQ29tcGxldGVkfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSlcblxuLy8gQ3JlYXRlIGEgbmV3IFRvZG8gY29sbGVjdGlvbiBhbmQgcmVuZGVyIHRoZSAqKkFwcCoqIGludG8gYCN0b2RvYXBwYC5cblJlYWN0LnJlbmRlcihcbiAgPEFwcENvbXBvbmVudCBjb2xsZWN0aW9uPXtuZXcgVG9kb0xpc3QoKX0gLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2FwcFwiKVxuKTtcbiJdfQ==\n  </script>\n </head>\n <body>\n  <div id="todoapp">\n   <div data-reactid=".0">\n    <header data-reactid=".0.0">\n     <h1 data-reactid=".0.0.0">\n      Todos\n     </h1>\n     <form data-reactid=".0.0.1">\n      <input data-reactid=".0.0.1.0" name="title" placeholder="What needs to be done?" type="text" value=""/>\n     </form>\n    </header>\n    <section data-reactid=".0.1" id="main" style="display:none;">\n     <input checked="" data-reactid=".0.1.0" id="toggle-all" type="checkbox"/>\n     <label data-reactid=".0.1.1" for="toggle-all">\n      Mark all as complete\n     </label>\n     <ul data-reactid=".0.1.2" id="todo-list">\n     </ul>\n     <footer data-reactid=".0.1.3">\n      <a data-reactid=".0.1.3.0" id="clear-completed" style="display:none;">\n       <span data-reactid=".0.1.3.0.0">\n        Clear\n       </span>\n       <span data-reactid=".0.1.3.0.1">\n        0\n       </span>\n       <span data-reactid=".0.1.3.0.2">\n        completed\n       </span>\n       <span data-reactid=".0.1.3.0.3">\n        items\n       </span>\n      </a>\n      <div class="todo-count" data-reactid=".0.1.3.1">\n       <b data-reactid=".0.1.3.1.0">\n        0\n       </b>\n       <span data-reactid=".0.1.3.1.1">\n        items\n       </span>\n       <span data-reactid=".0.1.3.1.2">\n        left\n       </span>\n      </div>\n     </footer>\n    </section>\n   </div>\n  </div>\n  <div id="instructions">\n   Double-click to edit a todo.\n  </div>\n  <div id="credits">\n   Created by:\n   <a href="https://twitter.com/ssorallen?rel=author">\n    Ross Allen\n   </a>\n   <br/>\n   The source:\n   <a href="https://github.com/ssorallen/reacttodos">\n    ssorallen/reacttodos\n   </a>\n   <br/>\n   Adapted from:\n   <a href="http://localtodos.com/">\n    Backbone.js Todos\n   </a>\n  </div>\n  <script src="bower_components/underscore/underscore-min.js">\n  </script>\n  <script src="bower_components/backbone/backbone.js">\n  </script>\n  <script src="bower_components/backbone.localStorage/backbone.localStorage-min.js">\n  </script>\n  <script src="bower_components/react/JSXTransformer.js">\n  </script>\n  <script src="bower_components/react/react.min.js">\n  </script>\n  <!-- Use type="text/jsx" so "todos.js" will be compiled by the JSXTransformer\n         as JSX syntax -->\n  <script src="todos.js" type="text/jsx">\n  </script>\n </body>\n</html>'b'<!DOCTYPE html>\n<html xmlns="http://www.w3.org/1999/xhtml">\n <head>\n  <meta charset="utf-8"/>\n  <title>\n   React.js Todos\n  </title>\n  <meta content="Backbone\'s example TODO app with React JS\n      Components for views in place of Backbone.View" name="description"/>\n  <link href="favicon.ico" rel="icon" type="image/x-icon"/>\n  <link href="css/reacttodos.css" rel="stylesheet"/>\n  <script>\n   // Todo Model\n// ----------\n\n// Our basic **Todo** model has `title` and `done` attributes.\nvar Todo = Backbone.Model.extend({\n\n  // Default attributes for the Todo item.\n  defaults: function() {\n    return {\n      title: "",\n      done: false\n    };\n  }\n\n});\n\n// Todo Collection\n// ---------------\n\n// The collection of Todos is backed by *localStorage* instead of a remote\n// server.\nvar TodoList = Backbone.Collection.extend({\n\n  // Reference to this collection\'s model.\n  model: Todo,\n\n  // Save all of the todo items under the `"todos-react"` namespace.\n  localStorage: new Backbone.LocalStorage("todos-react"),\n\n  // Filter down the list of all todo items that are finished.\n  done: function() {\n    return this.where({done: true});\n  },\n\n  // Filter down the list to only todo items that are still not finished.\n  remaining: function() {\n    return this.where({done: false});\n  }\n\n});\n\n// Backbone/React Integration\n// --------------------------\n\n// Updates React components when their Backbone resources change. Expects the\n// component to implement a method called `getResource` that returns an object\n// that extends `Backbone.Events`.\nvar BackboneMixin = {\n\n  // Listen to all events on this component\'s collection or model and force an\n  // update when they fire. Let React decide whether the DOM should change.\n  componentDidMount: function() {\n    this._boundForceUpdate = this.forceUpdate.bind(this, null);\n    this.getResource().on("all", this._boundForceUpdate, this);\n  },\n\n  // Clean up the listener when the component will be removed.\n  componentWillUnmount: function() {\n    this.getResource().off("all", this._boundForceUpdate);\n  }\n\n};\n\n// Todo List Item Component\n// ------------------------\n\n// The DOM for a todo item...\nvar TodoListItemComponent = React.createClass({displayName: \'TodoListItemComponent\',\n\n  // If the component updates and is in edit mode, send focus to the `&lt;input&gt;`.\n  componentDidUpdate: function(prevProps) {\n    if (this.props.editing &amp;&amp; !prevProps.editing) {\n      this.refs.editInput.getDOMNode().focus();\n    }\n  },\n\n  // Destroying the model fires a `remove` event on the model\'s collection,\n  // which forces an update and removes this **TodoListItemComponent** from the\n  // DOM. We don\'t have to do any other cleanup!\n  destroy: function() {\n    this.props.model.destroy();\n  },\n\n  // Stop editing if the input gets an "Enter" keypress.\n  handleEditKeyPress: function(event) {\n    if (13 === event.keyCode) {\n      this.stopEditing();\n    }\n  },\n\n  render: function() {\n    var inputStyles = {};\n    var viewStyles = {};\n\n    // Hide the `.view` when editing\n    if (this.props.editing) {\n      viewStyles.display = "none";\n\n    // ... and hide the `&lt;input&gt;` when not editing\n    } else {\n      inputStyles.display = "none";\n    }\n\n    return (\n      React.createElement("li", {className: this.props.model.get("done") ? "done" : ""}, \n        React.createElement("div", {className: "view", onDoubleClick: this.startEditing, style: viewStyles}, \n          React.createElement("input", {className: "toggle", type: "checkbox", \n            checked: this.props.model.get("done"), \n            onChange: this.toggleDone}), \n          React.createElement("label", null, this.props.model.get("title")), \n          React.createElement("a", {className: "destroy", onClick: this.destroy})\n        ), \n        React.createElement("input", {className: "edit", ref: "editInput", type: "text", \n          onBlur: this.stopEditing, \n          onChange: this.setTitle, \n          onKeyPress: this.handleEditKeyPress, \n          style: inputStyles, \n          value: this.props.model.get("title")})\n      )\n    );\n  },\n\n  // Set the title of this item\'s model when the value of the `&lt;input&gt;` changes.\n  setTitle: function(event) {\n    this.props.model.set("title", event.target.value);\n  },\n\n  // Tell the parent component this list item is entering edit mode.\n  startEditing: function() {\n    this.props.onStartEditing(this.props.model.id);\n  },\n\n  // Exit edit mode.\n  stopEditing: function() {\n    this.props.onStopEditing(this.props.model.id);\n  },\n\n  toggleDone: function(event) {\n    this.props.model.set("done", event.target.checked);\n  }\n\n});\n\n// Todo List Component\n// -------------------\n\n// Renders a list of todos.\nvar TodoListComponent = React.createClass({displayName: \'TodoListComponent\',\n\n  // Start with no list item in edit mode.\n  getInitialState: function() {\n    return {\n      editingModelId: null\n    };\n  },\n\n  // When a `TodoListItemComponent` starts editing, it passes its model\'s ID to\n  // this callback. Setting the state triggers this component to re-render and\n  // render that `TodoListItemComponent` in edit mode.\n  setEditingModelId: function(modelId) {\n    this.setState({editingModelId: modelId});\n  },\n\n  unsetEditingModelId: function(modelId) {\n    if (modelId === this.state.editingModelId) {\n      this.setState({editingModelId: null});\n    }\n  },\n\n  render: function() {\n    return (\n      React.createElement("ul", {id: "todo-list"}, \n        this.props.collection.map(function(model) {\n          // Pass the `key` attribute[1] a unique ID so React can track the\n          // elements properly.\n          //\n          // [1] http://facebook.github.io/react/docs/multiple-components.html#dynamic-children\n          return (\n            React.createElement(TodoListItemComponent, {\n              editing: this.state.editingModelId === model.id, \n              key: model.id, \n              model: model, \n              onStartEditing: this.setEditingModelId, \n              onStopEditing: this.unsetEditingModelId})\n          );\n        }, this)\n      )\n    );\n  }\n\n});\n\n// Footer Component\n// ----------------\n\n// The footer shows the total number of todos and how many are completed.\nvar FooterComponent = React.createClass({displayName: \'FooterComponent\',\n\n  render: function() {\n    var clearCompletedStyles = {};\n\n    // Hide the "Clear X completed items" button if there are no completed\n    // items.\n    if (0 === this.props.itemsDoneCount) {\n      clearCompletedStyles.display = "none";\n    }\n\n    // Clicking the "Clear X completed items" button calls the\n    // "clearCompletedItems" function passed in on `props`.\n    return (\n      React.createElement("footer", null, \n        React.createElement("a", {id: "clear-completed", style: clearCompletedStyles, \n            onClick: this.props.clearCompletedItems}, \n          "Clear ", this.props.itemsDoneCount, " completed", \n          1 === this.props.itemsDoneCount ? " item" : " items"\n        ), \n        React.createElement("div", {className: "todo-count"}, \n          React.createElement("b", null, this.props.itemsRemainingCount), \n          1 === this.props.itemsRemainingCount ? " item" : " items", " left"\n        )\n      )\n    );\n  }\n\n});\n\n// Main Component\n// --------------\n\n// The main component contains the list of todos and the footer.\nvar MainComponent = React.createClass({displayName: \'MainComponent\',\n\n  // Tell the **App** to toggle the *done* state of all **Todo** items.\n  toggleAllItemsCompleted: function(event) {\n    this.props.toggleAllItemsCompleted(event.target.checked);\n  },\n\n  render: function() {\n    var style = {};\n\n    // Hide the "Mark all as complete" button and the footer if there are no\n    // **Todo** items.\n    if (0 === this.props.collection.length) {\n      style.display = "none";\n    }\n\n    return (\n      React.createElement("section", {id: "main", style: style}, \n        React.createElement("input", {id: "toggle-all", type: "checkbox", \n          checked: 0 === this.props.collection.remaining().length, \n          onChange: this.toggleAllItemsCompleted}), \n        React.createElement("label", {htmlFor: "toggle-all"}, \n          "Mark all as complete"\n        ), \n        React.createElement(TodoListComponent, {collection: this.props.collection}), \n        React.createElement(FooterComponent, {\n          clearCompletedItems: this.props.clearCompletedItems, \n          itemsRemainingCount: this.props.collection.remaining().length, \n          itemsDoneCount: this.props.collection.done().length})\n      )\n    );\n  }\n\n});\n\nvar AppComponent = React.createClass({displayName: \'AppComponent\',\n\n  // Clear all done todo items, destroying their models.\n  clearCompletedItems: function() {\n    _.invoke(this.props.collection.done(), "destroy");\n  },\n\n  // Fetch Todos before the App is rendered to the DOM.\n  componentWillMount: function() {\n    this.props.collection.fetch();\n  },\n\n  // Start the app with a blank `&lt;input&gt;`.\n  getInitialState: function() {\n    return {\n      title: ""\n    };\n  },\n\n  // Used by the **BackboneMixin** to watch for changes on this component\'s\n  // resource.\n  getResource: function() {\n    return this.props.collection;\n  },\n\n  // Set the state of the title when the `&lt;input&gt;` is changed.\n  handleTitleChange: function(event) {\n    this.setState({title: event.target.value});\n  },\n\n  // If "Enter" is pressed in the main input field, it will submit the form.\n  // Create a new **Todo** in *localStorage* and reset the title.\n  handleTitleFormSubmit: function(event) {\n    event.preventDefault();\n\n    if ("" === this.state.title) return;\n\n    this.props.collection.create({title: this.state.title});\n    this.setState({title: ""});\n  },\n\n  toggleAllItemsCompleted: function(completed) {\n    this.props.collection.each(function(todo) {\n      todo.save({"done": completed});\n    });\n  },\n\n  // Force updates whenever this **App**\'s collection receives events.\n  mixins: [BackboneMixin],\n\n  render: function() {\n    return (\n      React.createElement("div", null, \n        React.createElement("header", null, \n          React.createElement("h1", null, "Todos"), \n          React.createElement("form", {onSubmit: this.handleTitleFormSubmit}, \n            React.createElement("input", {placeholder: "What needs to be done?", type: "text", name: "title", \n              onChange: this.handleTitleChange, \n              value: this.state.title})\n          )\n        ), \n        React.createElement(MainComponent, {\n          clearCompletedItems: this.clearCompletedItems, \n          collection: this.props.collection, \n          toggleAllItemsCompleted: this.toggleAllItemsCompleted})\n      )\n    );\n  }\n})\n\n// Create a new Todo collection and render the **App** into `#todoapp`.\nReact.render(\n  React.createElement(AppComponent, {collection: new TodoList()}),\n  document.getElementById("todoapp")\n);\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtZWQuanMiLCJzb3VyY2VzIjpbInJlYWN0LXRvZG9zL3RvZG9zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGFBQWE7QUFDYixhQUFhOztBQUViLDhEQUE4RDtBQUM5RCxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztBQUNqQzs7RUFFRSxRQUFRLEVBQUUsV0FBVztJQUNuQixPQUFPO01BQ0wsS0FBSyxFQUFFLEVBQUU7TUFDVCxJQUFJLEVBQUUsS0FBSztLQUNaLENBQUM7QUFDTixHQUFHOztBQUVILENBQUMsQ0FBQyxDQUFDOztBQUVILGtCQUFrQjtBQUNsQixrQkFBa0I7O0FBRWxCLDBFQUEwRTtBQUMxRSxVQUFVO0FBQ1YsSUFBSSxRQUFRLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDMUM7O0FBRUEsRUFBRSxLQUFLLEVBQUUsSUFBSTtBQUNiOztBQUVBLEVBQUUsWUFBWSxFQUFFLElBQUksUUFBUSxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUM7QUFDeEQ7O0VBRUUsSUFBSSxFQUFFLFdBQVc7SUFDZixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUNwQyxHQUFHO0FBQ0g7O0VBRUUsU0FBUyxFQUFFLFdBQVc7SUFDcEIsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDckMsR0FBRzs7QUFFSCxDQUFDLENBQUMsQ0FBQzs7QUFFSCw2QkFBNkI7QUFDN0IsNkJBQTZCOztBQUU3Qiw2RUFBNkU7QUFDN0UsOEVBQThFO0FBQzlFLGtDQUFrQztBQUNsQyxJQUFJLGFBQWEsR0FBRztBQUNwQjtBQUNBOztFQUVFLGlCQUFpQixFQUFFLFdBQVc7SUFDNUIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElB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QUMsdUJBQXdCLENBQUEsQ0FBRyxDQUFBO01BQ3ZELENBQUE7TUFDTjtHQUNIO0FBQ0gsQ0FBQyxDQUFDOztBQUVGLHVFQUF1RTtBQUN2RSxLQUFLLENBQUMsTUFBTTtFQUNWLG9CQUFDLFlBQVksRUFBQSxDQUFBLENBQUMsVUFBQSxFQUFVLENBQUUsSUFBSSxRQUFRLEVBQUcsQ0FBQSxDQUFHLENBQUE7RUFDNUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7Q0FDbkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFRvZG8gTW9kZWxcbi8vIC0tLS0tLS0tLS1cblxuLy8gT3VyIGJhc2ljICoqVG9kbyoqIG1vZGVsIGhhcyBgdGl0bGVgIGFuZCBgZG9uZWAgYXR0cmlidXRlcy5cbnZhciBUb2RvID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKHtcblxuICAvLyBEZWZhdWx0IGF0dHJpYnV0ZXMgZm9yIHRoZSBUb2RvIGl0ZW0uXG4gIGRlZmF1bHRzOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IFwiXCIsXG4gICAgICBkb25lOiBmYWxzZVxuICAgIH07XG4gIH1cblxufSk7XG5cbi8vIFRvZG8gQ29sbGVjdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tXG5cbi8vIFRoZSBjb2xsZWN0aW9uIG9mIFRvZG9zIGlzIGJhY2tlZCBieSAqbG9jYWxTdG9yYWdlKiBpbnN0ZWFkIG9mIGEgcmVtb3RlXG4vLyBzZXJ2ZXIuXG52YXIgVG9kb0xpc3QgPSBCYWNrYm9uZS5Db2xsZWN0aW9uLmV4dGVuZCh7XG5cbiAgLy8gUmVmZXJlbmNlIHRvIHRoaXMgY29sbGVjdGlvbidzIG1vZGVsLlxuICBtb2RlbDogVG9kbyxcblxuICAvLyBTYXZlIGFsbCBvZiB0aGUgdG9kbyBpdGVtcyB1bmRlciB0aGUgYFwidG9kb3MtcmVhY3RcImAgbmFtZXNwYWNlLlxuICBsb2NhbFN0b3JhZ2U6IG5ldyBCYWNrYm9uZS5Mb2NhbFN0b3JhZ2UoXCJ0b2Rvcy1yZWFjdFwiKSxcblxuICAvLyBGaWx0ZXIgZG93biB0aGUgbGlzdCBvZiBhbGwgdG9kbyBpdGVtcyB0aGF0IGFyZSBmaW5pc2hlZC5cbiAgZG9uZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMud2hlcmUoe2RvbmU6IHRydWV9KTtcbiAgfSxcblxuICAvLyBGaWx0ZXIgZG93biB0aGUgbGlzdCB0byBvbmx5IHRvZG8gaXRlbXMgdGhhdCBhcmUgc3RpbGwgbm90IGZpbmlzaGVkLlxuICByZW1haW5pbmc6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLndoZXJlKHtkb25lOiBmYWxzZX0pO1xuICB9XG5cbn0pO1xuXG4vLyBCYWNrYm9uZS9SZWFjdCBJbnRlZ3JhdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVXBkYXRlcyBSZWFjdCBjb21wb25lbnRzIHdoZW4gdGhlaXIgQmFja2JvbmUgcmVzb3VyY2VzIGNoYW5nZS4gRXhwZWN0cyB0aGVcbi8vIGNvbXBvbmVudCB0byBpbXBsZW1lbnQgYSBtZXRob2QgY2FsbGVkIGBnZXRSZXNvdXJjZWAgdGhhdCByZXR1cm5zIGFuIG9iamVjdFxuLy8gdGhhdCBleHRlbmRzIGBCYWNrYm9uZS5FdmVudHNgLlxudmFyIEJhY2tib25lTWl4aW4gPSB7XG5cbiAgLy8gTGlzdGVuIHRvIGFsbCBldmVudHMgb24gdGhpcyBjb21wb25lbnQncyBjb2xsZWN0aW9uIG9yIG1vZGVsIGFuZCBmb3JjZSBhblxuICAvLyB1cGRhdGUgd2hlbiB0aGV5IGZpcmUuIExldCBSZWFjdCBkZWNpZGUgd2hldGhlciB0aGUgRE9NIHNob3VsZCBjaGFuZ2UuXG4gIGNvbXBvbmVudERpZE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9ib3VuZEZvcmNlVXBkYXRlID0gdGhpcy5mb3JjZVVwZGF0ZS5iaW5kKHRoaXMsIG51bGwpO1xuICAgIHRoaXMuZ2V0UmVzb3VyY2UoKS5vbihcImFsbFwiLCB0aGlzLl9ib3VuZEZvcmNlVXBkYXRlLCB0aGlzKTtcbiAgfSxcblxuICAvLyBDbGVhbiB1cCB0aGUgbGlzdGVuZXIgd2hlbiB0aGUgY29tcG9uZW50IHdpbGwgYmUgcmVtb3ZlZC5cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZ2V0UmVzb3VyY2UoKS5vZmYoXCJhbGxcIiwgdGhpcy5fYm91bmRGb3JjZVVwZGF0ZSk7XG4gIH1cblxufTtcblxuLy8gVG9kbyBMaXN0IEl0ZW0gQ29tcG9uZW50XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gVGhlIERPTSBmb3IgYSB0b2RvIGl0ZW0uLi5cbnZhciBUb2RvTGlzdEl0ZW1Db21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgLy8gSWYgdGhlIGNvbXBvbmVudCB1cGRhdGVzIGFuZCBpcyBpbiBlZGl0IG1vZGUsIHNlbmQgZm9jdXMgdG8gdGhlIGA8aW5wdXQ+YC5cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBmdW5jdGlvbihwcmV2UHJvcHMpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5lZGl0aW5nICYmICFwcmV2UHJvcHMuZWRpdGluZykge1xuICAgICAgdGhpcy5yZWZzLmVkaXRJbnB1dC5nZXRET01Ob2RlKCkuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gRGVzdHJveWluZyB0aGUgbW9kZWwgZmlyZXMgYSBgcmVtb3ZlYCBldmVudCBvbiB0aGUgbW9kZWwncyBjb2xsZWN0aW9uLFxuICAvLyB3aGljaCBmb3JjZXMgYW4gdXBkYXRlIGFuZCByZW1vdmVzIHRoaXMgKipUb2RvTGlzdEl0ZW1Db21wb25lbnQqKiBmcm9tIHRoZVxuICAvLyBET00uIFdlIGRvbid0IGhhdmUgdG8gZG8gYW55IG90aGVyIGNsZWFudXAhXG4gIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMubW9kZWwuZGVzdHJveSgpO1xuICB9LFxuXG4gIC8vIFN0b3AgZWRpdGluZyBpZiB0aGUgaW5wdXQgZ2V0cyBhbiBcIkVudGVyXCIga2V5cHJlc3MuXG4gIGhhbmRsZUVkaXRLZXlQcmVzczogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoMTMgPT09IGV2ZW50LmtleUNvZGUpIHtcbiAgICAgIHRoaXMuc3RvcEVkaXRpbmcoKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5wdXRTdHlsZXMgPSB7fTtcbiAgICB2YXIgdmlld1N0eWxlcyA9IHt9O1xuXG4gICAgLy8gSGlkZSB0aGUgYC52aWV3YCB3aGVuIGVkaXRpbmdcbiAgICBpZiAodGhpcy5wcm9wcy5lZGl0aW5nKSB7XG4gICAgICB2aWV3U3R5bGVzLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIC8vIC4uLiBhbmQgaGlkZSB0aGUgYDxpbnB1dD5gIHdoZW4gbm90IGVkaXRpbmdcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXRTdHlsZXMuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8bGkgY2xhc3NOYW1lPXt0aGlzLnByb3BzLm1vZGVsLmdldChcImRvbmVcIikgPyBcImRvbmVcIiA6IFwiXCJ9PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInZpZXdcIiBvbkRvdWJsZUNsaWNrPXt0aGlzLnN0YXJ0RWRpdGluZ30gc3R5bGU9e3ZpZXdTdHlsZXN9PlxuICAgICAgICAgIDxpbnB1dCBjbGFzc05hbWU9XCJ0b2dnbGVcIiB0eXBlPVwiY2hlY2tib3hcIlxuICAgICAgICAgICAgY2hlY2tlZD17dGhpcy5wcm9wcy5tb2RlbC5nZXQoXCJkb25lXCIpfVxuICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMudG9nZ2xlRG9uZX0gLz5cbiAgICAgICAgICA8bGFiZWw+e3RoaXMucHJvcHMubW9kZWwuZ2V0KFwidGl0bGVcIil9PC9sYWJlbD5cbiAgICAgICAgICA8YSBjbGFzc05hbWU9XCJkZXN0cm95XCIgb25DbGljaz17dGhpcy5kZXN0cm95fT48L2E+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8aW5wdXQgY2xhc3NOYW1lPVwiZWRpdFwiIHJlZj1cImVkaXRJbnB1dFwiIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICBvbkJsdXI9e3RoaXMuc3RvcEVkaXRpbmd9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuc2V0VGl0bGV9XG4gICAgICAgICAgb25LZXlQcmVzcz17dGhpcy5oYW5kbGVFZGl0S2V5UHJlc3N9XG4gICAgICAgICAgc3R5bGU9e2lucHV0U3R5bGVzfVxuICAgICAgICAgIHZhbHVlPXt0aGlzLnByb3BzLm1vZGVsLmdldChcInRpdGxlXCIpfSAvPlxuICAgICAgPC9saT5cbiAgICApO1xuICB9LFxuXG4gIC8vIFNldCB0aGUgdGl0bGUgb2YgdGhpcyBpdGVtJ3MgbW9kZWwgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGA8aW5wdXQ+YCBjaGFuZ2VzLlxuICBzZXRUaXRsZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB0aGlzLnByb3BzLm1vZGVsLnNldChcInRpdGxlXCIsIGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gIH0sXG5cbiAgLy8gVGVsbCB0aGUgcGFyZW50IGNvbXBvbmVudCB0aGlzIGxpc3QgaXRlbSBpcyBlbnRlcmluZyBlZGl0IG1vZGUuXG4gIHN0YXJ0RWRpdGluZzogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5wcm9wcy5vblN0YXJ0RWRpdGluZyh0aGlzLnByb3BzLm1vZGVsLmlkKTtcbiAgfSxcblxuICAvLyBFeGl0IGVkaXQgbW9kZS5cbiAgc3RvcEVkaXRpbmc6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucHJvcHMub25TdG9wRWRpdGluZyh0aGlzLnByb3BzLm1vZGVsLmlkKTtcbiAgfSxcblxuICB0b2dnbGVEb25lOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMucHJvcHMubW9kZWwuc2V0KFwiZG9uZVwiLCBldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gIH1cblxufSk7XG5cbi8vIFRvZG8gTGlzdCBDb21wb25lbnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gUmVuZGVycyBhIGxpc3Qgb2YgdG9kb3MuXG52YXIgVG9kb0xpc3RDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG5cbiAgLy8gU3RhcnQgd2l0aCBubyBsaXN0IGl0ZW0gaW4gZWRpdCBtb2RlLlxuICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0aW5nTW9kZWxJZDogbnVsbFxuICAgIH07XG4gIH0sXG5cbiAgLy8gV2hlbiBhIGBUb2RvTGlzdEl0ZW1Db21wb25lbnRgIHN0YXJ0cyBlZGl0aW5nLCBpdCBwYXNzZXMgaXRzIG1vZGVsJ3MgSUQgdG9cbiAgLy8gdGhpcyBjYWxsYmFjay4gU2V0dGluZyB0aGUgc3RhdGUgdHJpZ2dlcnMgdGhpcyBjb21wb25lbnQgdG8gcmUtcmVuZGVyIGFuZFxuICAvLyByZW5kZXIgdGhhdCBgVG9kb0xpc3RJdGVtQ29tcG9uZW50YCBpbiBlZGl0IG1vZGUuXG4gIHNldEVkaXRpbmdNb2RlbElkOiBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7ZWRpdGluZ01vZGVsSWQ6IG1vZGVsSWR9KTtcbiAgfSxcblxuICB1bnNldEVkaXRpbmdNb2RlbElkOiBmdW5jdGlvbihtb2RlbElkKSB7XG4gICAgaWYgKG1vZGVsSWQgPT09IHRoaXMuc3RhdGUuZWRpdGluZ01vZGVsSWQpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe2VkaXRpbmdNb2RlbElkOiBudWxsfSk7XG4gICAgfVxuICB9LFxuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDx1bCBpZD1cInRvZG8tbGlzdFwiPlxuICAgICAgICB7dGhpcy5wcm9wcy5jb2xsZWN0aW9uLm1hcChmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICAgIC8vIFBhc3MgdGhlIGBrZXlgIGF0dHJpYnV0ZVsxXSBhIHVuaXF1ZSBJRCBzbyBSZWFjdCBjYW4gdHJhY2sgdGhlXG4gICAgICAgICAgLy8gZWxlbWVudHMgcHJvcGVybHkuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBbMV0gaHR0cDovL2ZhY2Vib29rLmdpdGh1Yi5pby9yZWFjdC9kb2NzL211bHRpcGxlLWNvbXBvbmVudHMuaHRtbCNkeW5hbWljLWNoaWxkcmVuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxUb2RvTGlzdEl0ZW1Db21wb25lbnRcbiAgICAgICAgICAgICAgZWRpdGluZz17dGhpcy5zdGF0ZS5lZGl0aW5nTW9kZWxJZCA9PT0gbW9kZWwuaWR9XG4gICAgICAgICAgICAgIGtleT17bW9kZWwuaWR9XG4gICAgICAgICAgICAgIG1vZGVsPXttb2RlbH1cbiAgICAgICAgICAgICAgb25TdGFydEVkaXRpbmc9e3RoaXMuc2V0RWRpdGluZ01vZGVsSWR9XG4gICAgICAgICAgICAgIG9uU3RvcEVkaXRpbmc9e3RoaXMudW5zZXRFZGl0aW5nTW9kZWxJZH0gLz5cbiAgICAgICAgICApO1xuICAgICAgICB9LCB0aGlzKX1cbiAgICAgIDwvdWw+XG4gICAgKTtcbiAgfVxuXG59KTtcblxuLy8gRm9vdGVyIENvbXBvbmVudFxuLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBUaGUgZm9vdGVyIHNob3dzIHRoZSB0b3RhbCBudW1iZXIgb2YgdG9kb3MgYW5kIGhvdyBtYW55IGFyZSBjb21wbGV0ZWQuXG52YXIgRm9vdGVyQ29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNsZWFyQ29tcGxldGVkU3R5bGVzID0ge307XG5cbiAgICAvLyBIaWRlIHRoZSBcIkNsZWFyIFggY29tcGxldGVkIGl0ZW1zXCIgYnV0dG9uIGlmIHRoZXJlIGFyZSBubyBjb21wbGV0ZWRcbiAgICAvLyBpdGVtcy5cbiAgICBpZiAoMCA9PT0gdGhpcy5wcm9wcy5pdGVtc0RvbmVDb3VudCkge1xuICAgICAgY2xlYXJDb21wbGV0ZWRTdHlsZXMuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cblxuICAgIC8vIENsaWNraW5nIHRoZSBcIkNsZWFyIFggY29tcGxldGVkIGl0ZW1zXCIgYnV0dG9uIGNhbGxzIHRoZVxuICAgIC8vIFwiY2xlYXJDb21wbGV0ZWRJdGVtc1wiIGZ1bmN0aW9uIHBhc3NlZCBpbiBvbiBgcHJvcHNgLlxuICAgIHJldHVybiAoXG4gICAgICA8Zm9vdGVyPlxuICAgICAgICA8YSBpZD1cImNsZWFyLWNvbXBsZXRlZFwiIHN0eWxlPXtjbGVhckNvbXBsZXRlZFN0eWxlc31cbiAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMuY2xlYXJDb21wbGV0ZWRJdGVtc30+XG4gICAgICAgICAgQ2xlYXIge3RoaXMucHJvcHMuaXRlbXNEb25lQ291bnR9IGNvbXBsZXRlZFxuICAgICAgICAgIHsxID09PSB0aGlzLnByb3BzLml0ZW1zRG9uZUNvdW50ID8gXCIgaXRlbVwiIDogXCIgaXRlbXNcIn1cbiAgICAgICAgPC9hPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRvZG8tY291bnRcIj5cbiAgICAgICAgICA8Yj57dGhpcy5wcm9wcy5pdGVtc1JlbWFpbmluZ0NvdW50fTwvYj5cbiAgICAgICAgICB7MSA9PT0gdGhpcy5wcm9wcy5pdGVtc1JlbWFpbmluZ0NvdW50ID8gXCIgaXRlbVwiIDogXCIgaXRlbXNcIn0gbGVmdFxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZm9vdGVyPlxuICAgICk7XG4gIH1cblxufSk7XG5cbi8vIE1haW4gQ29tcG9uZW50XG4vLyAtLS0tLS0tLS0tLS0tLVxuXG4vLyBUaGUgbWFpbiBjb21wb25lbnQgY29udGFpbnMgdGhlIGxpc3Qgb2YgdG9kb3MgYW5kIHRoZSBmb290ZXIuXG52YXIgTWFpbkNvbXBvbmVudCA9IFJlYWN0LmNyZWF0ZUNsYXNzKHtcblxuICAvLyBUZWxsIHRoZSAqKkFwcCoqIHRvIHRvZ2dsZSB0aGUgKmRvbmUqIHN0YXRlIG9mIGFsbCAqKlRvZG8qKiBpdGVtcy5cbiAgdG9nZ2xlQWxsSXRlbXNDb21wbGV0ZWQ6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy50b2dnbGVBbGxJdGVtc0NvbXBsZXRlZChldmVudC50YXJnZXQuY2hlY2tlZCk7XG4gIH0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc3R5bGUgPSB7fTtcblxuICAgIC8vIEhpZGUgdGhlIFwiTWFyayBhbGwgYXMgY29tcGxldGVcIiBidXR0b24gYW5kIHRoZSBmb290ZXIgaWYgdGhlcmUgYXJlIG5vXG4gICAgLy8gKipUb2RvKiogaXRlbXMuXG4gICAgaWYgKDAgPT09IHRoaXMucHJvcHMuY29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgIHN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPHNlY3Rpb24gaWQ9XCJtYWluXCIgc3R5bGU9e3N0eWxlfT5cbiAgICAgICAgPGlucHV0IGlkPVwidG9nZ2xlLWFsbFwiIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgY2hlY2tlZD17MCA9PT0gdGhpcy5wcm9wcy5jb2xsZWN0aW9uLnJlbWFpbmluZygpLmxlbmd0aH1cbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy50b2dnbGVBbGxJdGVtc0NvbXBsZXRlZH0gLz5cbiAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJ0b2dnbGUtYWxsXCI+XG4gICAgICAgICAgTWFyayBhbGwgYXMgY29tcGxldGVcbiAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgPFRvZG9MaXN0Q29tcG9uZW50IGNvbGxlY3Rpb249e3RoaXMucHJvcHMuY29sbGVjdGlvbn0gLz5cbiAgICAgICAgPEZvb3RlckNvbXBvbmVudFxuICAgICAgICAgIGNsZWFyQ29tcGxldGVkSXRlbXM9e3RoaXMucHJvcHMuY2xlYXJDb21wbGV0ZWRJdGVtc31cbiAgICAgICAgICBpdGVtc1JlbWFpbmluZ0NvdW50PXt0aGlzLnByb3BzLmNvbGxlY3Rpb24ucmVtYWluaW5nKCkubGVuZ3RofVxuICAgICAgICAgIGl0ZW1zRG9uZUNvdW50PXt0aGlzLnByb3BzLmNvbGxlY3Rpb24uZG9uZSgpLmxlbmd0aH0gLz5cbiAgICAgIDwvc2VjdGlvbj5cbiAgICApO1xuICB9XG5cbn0pO1xuXG52YXIgQXBwQ29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuXG4gIC8vIENsZWFyIGFsbCBkb25lIHRvZG8gaXRlbXMsIGRlc3Ryb3lpbmcgdGhlaXIgbW9kZWxzLlxuICBjbGVhckNvbXBsZXRlZEl0ZW1zOiBmdW5jdGlvbigpIHtcbiAgICBfLmludm9rZSh0aGlzLnByb3BzLmNvbGxlY3Rpb24uZG9uZSgpLCBcImRlc3Ryb3lcIik7XG4gIH0sXG5cbiAgLy8gRmV0Y2ggVG9kb3MgYmVmb3JlIHRoZSBBcHAgaXMgcmVuZGVyZWQgdG8gdGhlIERPTS5cbiAgY29tcG9uZW50V2lsbE1vdW50OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnByb3BzLmNvbGxlY3Rpb24uZmV0Y2goKTtcbiAgfSxcblxuICAvLyBTdGFydCB0aGUgYXBwIHdpdGggYSBibGFuayBgPGlucHV0PmAuXG4gIGdldEluaXRpYWxTdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiBcIlwiXG4gICAgfTtcbiAgfSxcblxuICAvLyBVc2VkIGJ5IHRoZSAqKkJhY2tib25lTWl4aW4qKiB0byB3YXRjaCBmb3IgY2hhbmdlcyBvbiB0aGlzIGNvbXBvbmVudCdzXG4gIC8vIHJlc291cmNlLlxuICBnZXRSZXNvdXJjZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY29sbGVjdGlvbjtcbiAgfSxcblxuICAvLyBTZXQgdGhlIHN0YXRlIG9mIHRoZSB0aXRsZSB3aGVuIHRoZSBgPGlucHV0PmAgaXMgY2hhbmdlZC5cbiAgaGFuZGxlVGl0bGVDaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7dGl0bGU6IGV2ZW50LnRhcmdldC52YWx1ZX0pO1xuICB9LFxuXG4gIC8vIElmIFwiRW50ZXJcIiBpcyBwcmVzc2VkIGluIHRoZSBtYWluIGlucHV0IGZpZWxkLCBpdCB3aWxsIHN1Ym1pdCB0aGUgZm9ybS5cbiAgLy8gQ3JlYXRlIGEgbmV3ICoqVG9kbyoqIGluICpsb2NhbFN0b3JhZ2UqIGFuZCByZXNldCB0aGUgdGl0bGUuXG4gIGhhbmRsZVRpdGxlRm9ybVN1Ym1pdDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgaWYgKFwiXCIgPT09IHRoaXMuc3RhdGUudGl0bGUpIHJldHVybjtcblxuICAgIHRoaXMucHJvcHMuY29sbGVjdGlvbi5jcmVhdGUoe3RpdGxlOiB0aGlzLnN0YXRlLnRpdGxlfSk7XG4gICAgdGhpcy5zZXRTdGF0ZSh7dGl0bGU6IFwiXCJ9KTtcbiAgfSxcblxuICB0b2dnbGVBbGxJdGVtc0NvbXBsZXRlZDogZnVuY3Rpb24oY29tcGxldGVkKSB7XG4gICAgdGhpcy5wcm9wcy5jb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24odG9kbykge1xuICAgICAgdG9kby5zYXZlKHtcImRvbmVcIjogY29tcGxldGVkfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgLy8gRm9yY2UgdXBkYXRlcyB3aGVuZXZlciB0aGlzICoqQXBwKioncyBjb2xsZWN0aW9uIHJlY2VpdmVzIGV2ZW50cy5cbiAgbWl4aW5zOiBbQmFja2JvbmVNaXhpbl0sXG5cbiAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdj5cbiAgICAgICAgPGhlYWRlcj5cbiAgICAgICAgICA8aDE+VG9kb3M8L2gxPlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVRpdGxlRm9ybVN1Ym1pdH0+XG4gICAgICAgICAgICA8aW5wdXQgcGxhY2Vob2xkZXI9XCJXaGF0IG5lZWRzIHRvIGJlIGRvbmU/XCIgdHlwZT1cInRleHRcIiBuYW1lPVwidGl0bGVcIlxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVUaXRsZUNoYW5nZX1cbiAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUudGl0bGV9IC8+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICA8L2hlYWRlcj5cbiAgICAgICAgPE1haW5Db21wb25lbnRcbiAgICAgICAgICBjbGVhckNvbXBsZXRlZEl0ZW1zPXt0aGlzLmNsZWFyQ29tcGxldGVkSXRlbXN9XG4gICAgICAgICAgY29sbGVjdGlvbj17dGhpcy5wcm9wcy5jb2xsZWN0aW9ufVxuICAgICAgICAgIHRvZ2dsZUFsbEl0ZW1zQ29tcGxldGVkPXt0aGlzLnRvZ2dsZUFsbEl0ZW1zQ29tcGxldGVkfSAvPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfVxufSlcblxuLy8gQ3JlYXRlIGEgbmV3IFRvZG8gY29sbGVjdGlvbiBhbmQgcmVuZGVyIHRoZSAqKkFwcCoqIGludG8gYCN0b2RvYXBwYC5cblJlYWN0LnJlbmRlcihcbiAgPEFwcENvbXBvbmVudCBjb2xsZWN0aW9uPXtuZXcgVG9kb0xpc3QoKX0gLz4sXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9kb2FwcFwiKVxuKTtcbiJdfQ==\n  </script>\n </head>\n <body>\n  <div id="todoapp">\n   <div data-reactid=".0">\n    <header data-reactid=".0.0">\n     <h1 data-reactid=".0.0.0">\n      Todos\n     </h1>\n     <form data-reactid=".0.0.1">\n      <input data-reactid=".0.0.1.0" name="title" placeholder="What needs to be done?" type="text" value=""/>\n     </form>\n    </header>\n    <section data-reactid=".0.1" id="main" style="display:none;">\n     <input checked="" data-reactid=".0.1.0" id="toggle-all" type="checkbox"/>\n     <label data-reactid=".0.1.1" for="toggle-all">\n      Mark all as complete\n     </label>\n     <ul data-reactid=".0.1.2" id="todo-list">\n     </ul>\n     <footer data-reactid=".0.1.3">\n      <a data-reactid=".0.1.3.0" id="clear-completed" style="display:none;">\n       <span data-reactid=".0.1.3.0.0">\n        Clear\n       </span>\n       <span data-reactid=".0.1.3.0.1">\n        0\n       </span>\n       <span data-reactid=".0.1.3.0.2">\n        completed\n       </span>\n       <span data-reactid=".0.1.3.0.3">\n        items\n       </span>\n      </a>\n      <div class="todo-count" data-reactid=".0.1.3.1">\n       <b data-reactid=".0.1.3.1.0">\n        0\n       </b>\n       <span data-reactid=".0.1.3.1.1">\n        items\n       </span>\n       <span data-reactid=".0.1.3.1.2">\n        left\n       </span>\n      </div>\n     </footer>\n    </section>\n   </div>\n  </div>\n  <div id="instructions">\n   Double-click to edit a todo.\n  </div>\n  <div id="credits">\n   Created by:\n   <a href="https://twitter.com/ssorallen?rel=author">\n    Ross Allen\n   </a>\n   <br/>\n   The source:\n   <a href="https://github.com/ssorallen/reacttodos">\n    ssorallen/reacttodos\n   </a>\n   <br/>\n   Adapted from:\n   <a href="http://localtodos.com/">\n    Backbone.js Todos\n   </a>\n  </div>\n  <script src="bower_components/underscore/underscore-min.js">\n  </script>\n  <script src="bower_components/backbone/backbone.js">\n  </script>\n  <script src="bower_components/backbone.localStorage/backbone.localStorage-min.js">\n  </script>\n  <script src="bower_components/react/JSXTransformer.js">\n  </script>\n  <script src="bower_components/react/react.min.js">\n  </script>\n  <!-- Use type="text/jsx" so "todos.js" will be compiled by the JSXTransformer\n         as JSX syntax -->\n  <script src="todos.js" type="text/jsx">\n  </script>\n </body>\n</html>'
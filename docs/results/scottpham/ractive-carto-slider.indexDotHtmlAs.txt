b'<html>\n <head>\n  <meta content="width=device-width, initial-scale=1" name="viewport"/>\n  <!-- squared -->\n  <script src="squared.js">\n  </script>\n  <!-- ractive -->\n  <script src="//cdn.ractivejs.org/latest/ractive.min.js">\n  </script>\n  <!-- BS -->\n  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet"/>\n  <script src="//code.jquery.com/jquery-2.1.4.min.js">\n  </script>\n  <!-- buttons.css -->\n  <link href="buttons.css" rel="stylesheet"/>\n  <style type="text/css">\n   .legal {\n        background-color: steelblue;\n    }\n    \n    .legend {\n        width: 20px;\n        height: 20px;\n        float: left;\n        margin-right: 5px;\n        margin-left: 5px;\n    }\n    \n    .legend + span {\n        float: left;\n    }\n    \n    .banned {\n        background-color: #fec44f;\n    }\n    \n    .blah {\n        background-color: slategray;\n    }\n    \n    .notes {\n        font-size: 12px;\n        color: gray;\n    }\n    \n    #yearChooser {\n        width: 50%;\n        margin-bottom: 10px;\n        display: inline;\n    }\n\n    .rangeslider__fill {\n      background-color: slategray;\n    }\n    \n    label {\n        font-size: 24px;\n        font-weight: bold;\n        color: dimgray;\n    }\n    \n    .glyphicon {\n        font-size: 16px;\n    }\n    \n    @media(max-width:450px) {\n        .map {\n            margin-top: 40px;\n        }\n\n        .legend + span{\n          font-size: 12px;\n        }\n\n        .legend {\n          width: 15px;\n          height: 15px;\n        }\n    }\n  </style>\n </head>\n <!-- HTML -->\n <body>\n  <div id="container">\n  </div>\n  <!-- HTML OVER -->\n  <!-- GET THA DATA -->\n  <script src="data.js">\n  </script>\n  <!-- RACTIVE TEMPLATE -->\n  <script id="template" type="text/ractve">\n   <div class="container-fluid">\n        <div class="row">\n            <div id=\'wrapper\' class="col-sm-8 col-xs-12">\n                <h1>Same-Sex Marriage in State Law</h1>\n                <p>After Utah enacted the first ban on same-sex marriage in 1995, similar bans spread across the states. Yet, the US seemed to change its mind almost as quickly. The Massachusetts Supreme Judicial Court ruled in favor of same-sex marriage in 2003, but it wasn&#8217;t until 2008 that statewide reversals picked up steam.</p>\n                <label for=yearChooser>Year: {{yearChooser}}</label>\n                <form class="form-group form-group-lg">\n                    <div class=\'btn-group\'>\n                        <button type="button" on-click="play" class="btn btn-default btn-sm">\n                            <span class="glyphicon glyphicon-play"></span>\n                        </button>\n                        <button type="button" on-click="pause" class="btn btn-default btn-sm">\n                            <span class="glyphicon glyphicon-pause"></span>\n                        </button>\n                    </div>\n                    <input type=range id=\'yearChooser\' min=1995 value={{yearChooser}} max=2015 step=1>\n                </form>\n                <span class="legend banned"></span><span> = Banned</span>\n                <span class="legend legal"></span> <span> = Legal</span>\n                <span class="legend blah"></span><span> = Neither legal nor banned</span>\n                <div id="map-{{yearChooser}}" class="map" decorator=\'squares:{{yearChooser}}\' style="width: {{width}}px; height: {{height}}px"></div>\n                <div class="notes">\n                    <p>Data: Pew Research Center\n                        <br/> Map: Scott Pham</p>\n                </div>\n            </div>\n        </div>\n    </div>\n  </script>\n  <!-- RACTIVE CODE -->\n  <script>\n   // squares\nfunction squaresDecorator(node, content) {\n\n    var states = this.get(\'states\');\n    console.log(this);\n\n    var string = "map-" + content;\n    var map = new Squared(string);\n\n    function makeMap(content) {\n        map.make(states[content], {\n            "background-color": "slategray",\n            color: "white",\n            "font-size": "9pt",\n            padding: .1\n        });\n    }\n\n    // calculate height\n    var height = $(node).width() * 0.75;\n    // set height in ractive instance\n    this.set(\'height\', height);\n\n    this.observe(\'yearChooser\', function(year) {\n        console.log(year);\n        $(node).html(\'\');\n        makeMap(year);\n    });\n\n    makeMap(content);\n\n    return {\n        update: function(newValue, oldValue) {},\n        teardown: function() {\n            // cleanup work\n        }\n    };\n\n}; //end of squares\n\n\nvar ractive = new Ractive({\n    el: \'container\',\n    template: \'#template\',\n    data: {\n        states: data,\n        width: \'100%\',\n        animateVar: \'\',\n        height: \'\', //decorator sets this\n        yearChooser: 1995 //initializes\n    },\n    decorators: {\n        squares: squaresDecorator\n    },\n    animate: function () {\n    // clear out any old intervals\n    var temp = this.get(\'animateVar\');\n    this.set(\'animateVar\', clearInterval(temp));\n\n    // increment once immediately\n    currentYear = ractive.get(\'yearChooser\');\n    ractive.set(\'yearChooser\', currentYear + 1);\n\n    // set the interval on the empty var\n    this.set(\'animateVar\', setInterval(function() {\n        currentYear = ractive.get(\'yearChooser\');\n        if (currentYear < 2015) {\n            ractive.set(\'yearChooser\', currentYear + 1);\n        } else {\n            ractive.set(\'yearChooser\', 1995);\n        }\n    }, 500));\n}\n\n});\n\n\nractive.on({\n    play: ractive.animate,\n    pause: function() {\n        var temp = this.get(\'animateVar\');\n        ractive.set(\'animateVar\', clearInterval(temp));\n    }\n});\n\n\n// animate();\n  </script>\n  <script>\n  </script>\n </body>\n</html>'